/*
 * Program Name: ArtWork.java
 *
 * Version :  1
 *
 * @author: Bikash Roy
 * @author: Tanay Bhardwaj
 *
 *
 * This program, is a game, where player guesses the WORD in 9 turns, it not a Art is displayed as output.
 *
 * */

import javax.swing.filechooser.FileSystemView;
import java.util.Scanner;
import java.io.*;

public class ArtWork {

    // Make the path for creating a directory
    public static String filepath = FileSystemView.getFileSystemView().getHomeDirectory().toString() + "/bikashroy_ArtWorkFiles";
    // File name, based on cases of good guess and bad guess
    public static String filename;

    // This method creates all the files need for the program. - ArtWord - ArtWork
    public void createArtWorkFiles() throws IOException {
        for (int i = 11; i > 0; i--) {
            if (i == 11)
                filename = filepath + "/ArtWords.txt";
            else if (i == 10)
                filename = filepath + "/Success.txt";
            else
                filename = filepath + "/" + i + ".txt";

            if (!(new File(filename).exists())) {
                BufferedWriter bufferedWriter = null;
                FileWriter fileWriter = null;
                String content = "";
                if (i == 11)
                    content = "abTy";
                if (i == 10)
                    content = "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************";
                if (i == 9)
                    content = "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "***@@***@**********************************************************\n" +
                            "****@@*@@**********************************************************\n" +
                            "*****@@************************************************************\n" +
                            "*****@@************************************************************\n" +
                            "*****@@************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************";
                if (i == 8)
                    content = "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "***@@***@**@***@***************************************************\n" +
                            "****@@*@@***@@***@@************************************************\n" +
                            "*****@@*****@@***@@************************************************\n" +
                            "*****@@*****@@***@@************************************************\n" +
                            "*****@@********@***************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************";
                if (i == 7)
                    content = "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "***@@***@**@***@*****@@***@@***************************************\n" +
                            "****@@*@@***@@***@@**@@***@@***************************************\n" +
                            "*****@@*****@@***@@**@@***@@***************************************\n" +
                            "*****@@*****@@***@@***@***@****************************************\n" +
                            "*****@@********@*******@@******************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************";
                if (i == 6)
                    content = "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "***@@***@**@***@*****@@***@@***************************************\n" +
                            "****@@*@@***@@***@@**@@***@@***************************************\n" +
                            "*****@@*****@@***@@**@@***@@***************************************\n" +
                            "*****@@*****@@***@@***@***@****************************************\n" +
                            "*****@@********@*******@@****   ***********************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************";
                if (i == 5)
                    content = "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "***@@***@**@***@*****@@***@@*****@@********************************\n" +
                            "****@@*@@***@@***@@**@@***@@*****@@********************************\n" +
                            "*****@@*****@@***@@**@@***@@*****@@********************************\n" +
                            "*****@@*****@@***@@***@***@******@@********************************\n" +
                            "*****@@********@*******@@****   *@@@@@@****************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************";
                if (i == 4)
                    content = "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "***@@***@**@***@*****@@***@@*****@@********@@**********************\n" +
                            "****@@*@@***@@***@@**@@***@@*****@@******@@**@@********************\n" +
                            "*****@@*****@@***@@**@@***@@*****@@******@@**@@********************\n" +
                            "*****@@*****@@***@@***@***@******@@******@@**@@********************\n" +
                            "*****@@********@*******@@****   *@@@@@@****@@**********************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************";
                if (i == 3)
                    content = "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "***@@***@**@***@*****@@***@@*****@@********@@****@@@@@@************\n" +
                            "****@@*@@***@@***@@**@@***@@*****@@******@@**@@**@@****************\n" +
                            "*****@@*****@@***@@**@@***@@*****@@******@@**@@**@@@@@@************\n" +
                            "*****@@*****@@***@@***@***@******@@******@@**@@******@@************\n" +
                            "*****@@********@*******@@****   *@@@@@@****@@****@@@@@@************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************";
                if (i == 2)
                    content = "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "***@@***@**@***@*****@@***@@*****@@********@@****@@@@@@**@@@@@*****\n" +
                            "****@@*@@***@@***@@**@@***@@*****@@******@@**@@**@@********@*******\n" +
                            "*****@@*****@@***@@**@@***@@*****@@******@@**@@**@@@@@@****@*******\n" +
                            "*****@@*****@@***@@***@***@******@@******@@**@@******@@****@*******\n" +
                            "*****@@********@*******@@****   *@@@@@@****@@****@@@@@@****@*******\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************";
                if (i == 1)
                    content = "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "***@@***@**@***@*****@@***@@*****@@********@@****@@@@@@**@@@@@**@**\n" +
                            "****@@*@@***@@***@@**@@***@@*****@@******@@**@@**@@********@****@**\n" +
                            "*****@@*****@@***@@**@@***@@*****@@******@@**@@**@@@@@@****@****@**\n" +
                            "*****@@*****@@***@@***@***@******@@******@@**@@******@@****@**** **\n" +
                            "*****@@********@*******@@****   *@@@@@@****@@****@@@@@@****@****O**\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************\n" +
                            "*******************************************************************";

                new File(filepath).mkdirs();
                fileWriter = new FileWriter(filename);
                bufferedWriter = new BufferedWriter(fileWriter);
                bufferedWriter.write(content);
                System.out.println("File is created, and contents are inserted in the File.");
                if (bufferedWriter != null)
                    bufferedWriter.close();
                if (fileWriter != null)
                    fileWriter.close();
            }
        }
    }

    // This method processes the whole game
    public void playGame() throws IOException {
        char playAgain = 'y';
        while (playAgain == 'Y' || playAgain == 'y') {
            Scanner playerInputs = new Scanner(System.in);
            Scanner wordFile = new Scanner(new FileReader(filepath + "/ArtWords.txt"));
            String actualWord = wordFile.next();
            StringBuffer underScores;
            int remainingChances = 9;
            boolean win = false;
            String userInput;
            String guesses = "";
            underScores = makeUnderscores(actualWord);
            printArt("Success.txt");
            while (!win) {
                printInitialScreen(underScores, guesses);
                userInput = playerInputs.next();
                if(userInput.length() > 1) {
                    System.out.println("Enter one letter at a time..");
                    continue;
                }
                char character = userInput.charAt(0);
                guesses += character;
                if (actualWord.indexOf(character) < 0) {
                    printArt(remainingChances + ".txt");
                    remainingChances -= 1;
                    System.out.print("Guess Again \n");
                } else {
                    matchWithActualWord(actualWord, underScores, character);
                }
                System.out.println(remainingChances + " chances remaining");
                if (remainingChances == 0) {
                    System.out.println("You lose");
                    win = true;
                }
                if (actualWord.equals(underScores.toString())) {
                    System.out.println("You win!");
                    win = true;
                }
            }

            System.out.print("play again (y/n)?: ");
            playAgain = playerInputs.next().charAt(0);
            if (playAgain != 'Y' || playAgain != 'y')
                System.out.println("thanks for playing");
        }
    }

    // Prints the initial, welcome screen
    public void printInitialScreen(StringBuffer underScores, String guesses) {
        System.out.println(underScores.length() + " lettered word." + underScores);
        System.out.println("Guesses so far: " + guesses);
        System.out.print("Enter your guess: ");
    }

    // Mathes the characters entered by the user
    public void matchWithActualWord(String actualWord, StringBuffer underScores, char character) {
        for (int i = 0; i < actualWord.length(); i++)
            if (actualWord.charAt(i) == character) {
                underScores.setCharAt(i, character);
            }
    }

    // For the actual count of the word, replace them with "Underscore" "____"  for displaying
    public StringBuffer makeUnderscores(String actualWord) {
        StringBuffer underScores = new StringBuffer();
        for (int count = 0; count < actualWord.length(); count++) {
            underScores.append('_');
        }
        return underScores;
    }

    // Paint "YOU LOST !"
    public void printArt(String fileName) throws IOException {
        Scanner successArt = new Scanner(new FileReader(filepath + "/" + fileName));
        while (successArt.hasNextLine()) {
            System.out.println(successArt.nextLine());
        }
    }

    public static void main(String[] args) throws IOException {
        ArtWork artWork = new ArtWork();
        artWork.createArtWorkFiles(); // Create the necessary files
        artWork.playGame(); // Play the game
    }
}